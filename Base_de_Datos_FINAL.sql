--------------------------------------------------------
-- Archivo creado  - jueves-agosto-24-2023   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence AUDITORIA_CLIENTES_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."AUDITORIA_CLIENTES_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence AUDITORIA_PRODUCTOS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."AUDITORIA_PRODUCTOS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AUDITORIA
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_AUDITORIA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AUDITORIA_CLIENTE
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_AUDITORIA_CLIENTE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AUDITORIA_PRECIO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_AUDITORIA_PRECIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 19 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AUDITORIA_PRODUCTO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_AUDITORIA_PRODUCTO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_AUDITORIA_VENTA
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_AUDITORIA_VENTA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 3 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_CLIENTE
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_CLIENTE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_INVENTARIO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_INVENTARIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_MOVIMIENTO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_MOVIMIENTO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_PRECIO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_PRECIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_PRODUCTO
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_PRODUCTO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 101 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ID_VENTA
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_ID_VENTA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_PRODUCTO_ID
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_PRODUCTO_ID"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 4 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence SEQ_VENTAS
--------------------------------------------------------

   CREATE SEQUENCE  "G9_USUARIO"."SEQ_VENTAS"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Table AUDITORIA_CLIENTES
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."AUDITORIA_CLIENTES" 
   (	"ID_AUDITORIA_CLIENTE" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_AUDITORIA_CLIENTE"."NEXTVAL", 
	"ID_CLIENTE" NUMBER, 
	"FECHA" DATE, 
	"ACCION" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table AUDITORIA_PRECIOS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."AUDITORIA_PRECIOS" 
   (	"ID_AUDITORIA_PRECIO" NUMBER, 
	"ID_PRECIO" NUMBER, 
	"FECHA" DATE, 
	"ACCION" VARCHAR2(50 BYTE), 
	"PRECIO_ANTERIOR" NUMBER, 
	"PRECIO_ACTUALIZADO" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table AUDITORIA_PRODUCTOS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."AUDITORIA_PRODUCTOS" 
   (	"ID_AUDITORIA_PRODUCTO" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_AUDITORIA_PRODUCTO"."NEXTVAL", 
	"ID_PRODUCTO" NUMBER, 
	"FECHA" DATE, 
	"ACCION" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table AUDITORIAS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."AUDITORIAS" 
   (	"ID_AUDITORIA" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_AUDITORIA"."NEXTVAL", 
	"ID_MOVIMIENTO" NUMBER, 
	"FECHA" DATE, 
	"RESULTADO" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table AUDITORIA_VENTAS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."AUDITORIA_VENTAS" 
   (	"ID_Auditoria_Venta" NUMBER, 
	"ID_VENTA" NUMBER, 
	"CANTIDAD" NUMBER, 
	"ID_PRODUCTO" NUMBER, 
	"ID_CLIENTE" NUMBER, 
	"FECHA_VENTA" DATE, 
	"Accion" VARCHAR2(50 BYTE), 
	"Fecha_Accion" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table CLIENTES
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."CLIENTES" 
   (	"ID_CLIENTE" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_CLIENTE"."NEXTVAL", 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"DIRECCION" VARCHAR2(200 BYTE), 
	"TELEFONO" VARCHAR2(20 BYTE), 
	"CORREO_ELECTRONICO" VARCHAR2(100 BYTE), 
	"ESTADO_CLIENTE" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table INVENTARIO
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."INVENTARIO" 
   (	"ID_INVENTARIO" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_INVENTARIO"."NEXTVAL", 
	"ID_PRODUCTO" NUMBER, 
	"CANTIDAD_ACTUAL" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table MOVIMIENTOS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."MOVIMIENTOS" 
   (	"ID_MOVIMIENTO" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_MOVIMIENTO"."NEXTVAL", 
	"ID_PRODUCTO" NUMBER, 
	"TIPO_MOVIMIENTO" VARCHAR2(50 BYTE), 
	"CANTIDAD" NUMBER, 
	"FECHA" DATE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table PRECIOS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."PRECIOS" 
   (	"ID_PRECIO" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_PRECIO"."NEXTVAL", 
	"ID_PRODUCTO" NUMBER, 
	"PRECIO_COMPRA" NUMBER, 
	"PRECIO_VENTA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table PRODUCTOS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."PRODUCTOS" 
   (	"ID_PRODUCTO" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_PRODUCTO"."NEXTVAL", 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"DESCRIPCION" VARCHAR2(200 BYTE), 
	"CODIGO" VARCHAR2(50 BYTE), 
	"UNIDAD_MEDIDA" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Table VENTAS
--------------------------------------------------------

  CREATE TABLE "G9_USUARIO"."VENTAS" 
   (	"ID_VENTA" NUMBER DEFAULT "G9_USUARIO"."SEQ_ID_VENTA"."NEXTVAL", 
	"CANTIDAD" NUMBER, 
	"ID_PRODUCTO" NUMBER, 
	"ID_CLIENTE" NUMBER, 
	"FECHA_VENTA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for View V_CLIENTES_CON_COMPRAS_RECIENTES
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."V_CLIENTES_CON_COMPRAS_RECIENTES" ("ID_CLIENTE", "NOMBRE", "CORREO_ELECTRONICO", "ULTIMA_COMPRA") AS 
  SELECT c.ID_cliente, c.Nombre, c.Correo_electronico, MAX(v.Fecha_venta) AS Ultima_compra
FROM Clientes c
LEFT JOIN Ventas v ON c.ID_cliente = v.ID_cliente
GROUP BY c.ID_cliente, c.Nombre, c.Correo_electronico
;
--------------------------------------------------------
--  DDL for View VISTA_CLIENTES_ACTIVOS
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."VISTA_CLIENTES_ACTIVOS" ("ID_CLIENTE", "NOMBRE", "DIRECCION", "TELEFONO", "CORREO_ELECTRONICO", "ESTADO_CLIENTE") AS 
  SELECT "ID_CLIENTE","NOMBRE","DIRECCION","TELEFONO","CORREO_ELECTRONICO","ESTADO_CLIENTE"
FROM Clientes
WHERE ESTADO_CLIENTE = 'ACTIVO'
;
--------------------------------------------------------
--  DDL for View VISTA_CLIENTES_INACTIVOS
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."VISTA_CLIENTES_INACTIVOS" ("ID_CLIENTE", "NOMBRE", "DIRECCION", "TELEFONO", "CORREO_ELECTRONICO", "ESTADO_CLIENTE") AS 
  SELECT "ID_CLIENTE","NOMBRE","DIRECCION","TELEFONO","CORREO_ELECTRONICO","ESTADO_CLIENTE"
FROM Clientes
WHERE ESTADO_CLIENTE = 'INACTIVO'
;
--------------------------------------------------------
--  DDL for View VISTA_PRODUCTOS_PRECIOS
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."VISTA_PRODUCTOS_PRECIOS" ("ID_PRODUCTO", "NOMBRE_PRODUCTO", "DESCRIPCION", "CODIGO", "UNIDAD_MEDIDA", "PRECIO_COMPRA", "PRECIO_VENTA") AS 
  SELECT P.ID_producto, P.Nombre AS Nombre_Producto, P.Descripcion, P.Codigo, P.Unidad_medida, PR.Precio_compra, PR.Precio_venta
FROM Productos P
JOIN Precios PR ON P.ID_producto = PR.ID_producto
;
--------------------------------------------------------
--  DDL for View VISTA_PRODUCTOS_PRECIOS_BAJOS
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."VISTA_PRODUCTOS_PRECIOS_BAJOS" ("NOMBRE_PRODUCTO", "DESCRIPCION", "PRECIO_COMPRA", "PRECIO_VENTA") AS 
  SELECT P.Nombre AS Nombre_Producto, P.Descripcion, PR.Precio_compra, PR.Precio_venta
FROM Productos P
JOIN Precios PR ON P.ID_producto = PR.ID_producto
WHERE PR.Precio_venta < 15
;
--------------------------------------------------------
--  DDL for View VISTA_VENTAS_CLIENTES
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."VISTA_VENTAS_CLIENTES" ("ID_CLIENTE", "NOMBRE_CLIENTE", "DIRECCION", "TELEFONO", "CORREO_ELECTRONICO", "ID_VENTA", "CANTIDAD", "NOMBRE_PRODUCTO") AS 
  SELECT C.ID_cliente, C.Nombre Nombre_Cliente, C.Direccion, C.Telefono, C.Correo_electronico, V.ID_venta, V.cantidad, P.Nombre  Nombre_Producto
FROM Clientes C
JOIN Ventas V ON C.ID_cliente = V.id_cliente
JOIN Productos P ON V.id_producto = P.ID_producto
;
--------------------------------------------------------
--  DDL for View V_PRODUCTOS_MARGEN_BAJO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."V_PRODUCTOS_MARGEN_BAJO" ("ID_PRODUCTO", "NOMBRE", "PRECIO_VENTA", "PRECIO_COMPRA", "MARGEN_BENEFICIO") AS 
  SELECT v.ID_producto, p.Nombre, pr.Precio_venta, pr.Precio_compra,
       (pr.Precio_venta - pr.Precio_compra) / pr.Precio_compra * 10 AS  Margen_beneficio
FROM Ventas v
JOIN Productos p ON v.ID_producto = p.ID_producto
JOIN Precios pr ON p.ID_producto = pr.ID_producto
WHERE (pr.Precio_venta - pr.Precio_compra) / pr.Precio_compra * 10 < 20
;
--------------------------------------------------------
--  DDL for View V_PRODUCTOS_MENOS_INVENTARIO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."V_PRODUCTOS_MENOS_INVENTARIO" ("ID_PRODUCTO", "NOMBRE", "CANTIDAD_ACTUAL") AS 
  SELECT p.ID_producto, p.Nombre, i.Cantidad_actual
FROM Productos p
JOIN Inventario i ON p.ID_producto = i.ID_producto
WHERE i.Cantidad_actual < 30
;
--------------------------------------------------------
--  DDL for View V_VENTAS_POR_MES
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."V_VENTAS_POR_MES" ("MES", "TOTAL_VENTAS") AS 
  SELECT TO_CHAR(v.Fecha_venta, 'YYYY-MM') AS Mes, SUM(v.Cantidad) AS Total_ventas
FROM Ventas v
GROUP BY TO_CHAR(v.Fecha_venta, 'YYYY-MM')
;
--------------------------------------------------------
--  DDL for View V_VENTAS_TOTALES_POR_PRODUCTO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "G9_USUARIO"."V_VENTAS_TOTALES_POR_PRODUCTO" ("ID_PRODUCTO", "NOMBRE", "TOTAL_VENDIDO") AS 
  SELECT v.ID_producto, p.Nombre, SUM(v.Cantidad) AS Total_vendido
FROM Ventas v
JOIN Productos p ON v.ID_producto = p.ID_producto
GROUP BY v.ID_producto, p.Nombre
;
REM INSERTING into G9_USUARIO.AUDITORIA_CLIENTES
SET DEFINE OFF;
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (15,19,to_date('23/08/23','DD/MM/RR'),'INSERT');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (17,18,to_date('23/08/23','DD/MM/RR'),'Desactivado');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (21,18,to_date('23/08/23','DD/MM/RR'),'Activado');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (22,19,to_date('23/08/23','DD/MM/RR'),'Desactivado');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (41,21,to_date('24/08/23','DD/MM/RR'),'INSERT');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (42,21,to_date('24/08/23','DD/MM/RR'),'Activado');
Insert into G9_USUARIO.AUDITORIA_CLIENTES (ID_AUDITORIA_CLIENTE,ID_CLIENTE,FECHA,ACCION) values (43,1,to_date('24/08/23','DD/MM/RR'),'Desactivado');
REM INSERTING into G9_USUARIO.AUDITORIA_PRECIOS
SET DEFINE OFF;
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (10,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (7,28,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',10,19);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (8,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',100,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (9,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (11,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (12,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (13,32,to_date('23/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,110);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (16,28,to_date('24/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',19,19);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (17,28,to_date('24/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',19,19);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (18,32,to_date('24/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',110,90);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (14,33,to_date('24/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',12,16);
Insert into G9_USUARIO.AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO,ID_PRECIO,FECHA,ACCION,PRECIO_ANTERIOR,PRECIO_ACTUALIZADO) values (15,38,to_date('24/08/23','DD/MM/RR'),'UPDATE PRECIO_VENTA',12,15);
REM INSERTING into G9_USUARIO.AUDITORIA_PRODUCTOS
SET DEFINE OFF;
Insert into G9_USUARIO.AUDITORIA_PRODUCTOS (ID_AUDITORIA_PRODUCTO,ID_PRODUCTO,FECHA,ACCION) values (21,81,to_date('24/08/23','DD/MM/RR'),'INSERT');
REM INSERTING into G9_USUARIO.AUDITORIAS
SET DEFINE OFF;
REM INSERTING into G9_USUARIO.AUDITORIA_VENTAS
SET DEFINE OFF;
Insert into G9_USUARIO.AUDITORIA_VENTAS ("ID_Auditoria_Venta",ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA,"Accion","Fecha_Accion") values (1,6,3,40,18,to_date('24/08/23','DD/MM/RR'),'Venta realizada',to_date('24/08/23','DD/MM/RR'));
Insert into G9_USUARIO.AUDITORIA_VENTAS ("ID_Auditoria_Venta",ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA,"Accion","Fecha_Accion") values (2,21,3,40,1,to_date('24/08/23','DD/MM/RR'),'Venta realizada',to_date('24/08/23','DD/MM/RR'));
REM INSERTING into G9_USUARIO.CLIENTES
SET DEFINE OFF;
Insert into G9_USUARIO.CLIENTES (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (18,'Diego','123 Calle Principal','8364723','cliente@ejemplo.com','ACTIVO');
Insert into G9_USUARIO.CLIENTES (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (19,'Diego ramirez','123 Calle Principal','836472345','cliente@ejemplo.com','INACTIVO');
Insert into G9_USUARIO.CLIENTES (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (1,'Ariel Guido Martinez','El centr贸 de gu谩cimo','64035862','arielguido545@gmail.com','INACTIVO');
Insert into G9_USUARIO.CLIENTES (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (21,'jose','san jose','636323222','efafea@gmail.com','ACTIVO');
REM INSERTING into G9_USUARIO.INVENTARIO
SET DEFINE OFF;
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (17,35,75);
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (21,39,22);
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (22,40,54);
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (23,41,40);
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (27,45,30);
Insert into G9_USUARIO.INVENTARIO (ID_INVENTARIO,ID_PRODUCTO,CANTIDAD_ACTUAL) values (61,81,40);
REM INSERTING into G9_USUARIO.MOVIMIENTOS
SET DEFINE OFF;
REM INSERTING into G9_USUARIO.PRECIOS
SET DEFINE OFF;
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (28,35,5,19);
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (32,39,70,90);
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (33,40,8,16);
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (34,41,12,18);
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (38,45,8,15);
Insert into G9_USUARIO.PRECIOS (ID_PRECIO,ID_PRODUCTO,PRECIO_COMPRA,PRECIO_VENTA) values (61,81,10,15);
REM INSERTING into G9_USUARIO.PRODUCTOS
SET DEFINE OFF;
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (39,'Taladro','Taladro electrico','TALD004','Unidad');
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (35,'Destornillador','Destornillador plano','DEST002','Unidad');
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (45,'Gafas de Proteccion','Gafas de seguridad con proteccion UV','GAPR012','Unidad');
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (40,'Cinta Metrica','Cinta metrica de acero','CINT005','Unidad');
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (41,'Llave Inglesa','Llave ajustable','LLAV006','Unidad');
Insert into G9_USUARIO.PRODUCTOS (ID_PRODUCTO,NOMBRE,DESCRIPCION,CODIGO,UNIDAD_MEDIDA) values (81,'Llave Ajustable','Llave ajustable de 8 pulgadas','LLAJ010','Unidad');
REM INSERTING into G9_USUARIO.VENTAS
SET DEFINE OFF;
Insert into G9_USUARIO.VENTAS (ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA) values (1,3,39,1,to_date('23/08/23','DD/MM/RR'));
Insert into G9_USUARIO.VENTAS (ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA) values (2,3,39,19,to_date('23/08/23','DD/MM/RR'));
Insert into G9_USUARIO.VENTAS (ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA) values (6,3,40,18,to_date('24/08/23','DD/MM/RR'));
Insert into G9_USUARIO.VENTAS (ID_VENTA,CANTIDAD,ID_PRODUCTO,ID_CLIENTE,FECHA_VENTA) values (21,3,40,1,to_date('24/08/23','DD/MM/RR'));
REM INSERTING into G9_USUARIO.V_CLIENTES_CON_COMPRAS_RECIENTES
SET DEFINE OFF;
Insert into G9_USUARIO.V_CLIENTES_CON_COMPRAS_RECIENTES (ID_CLIENTE,NOMBRE,CORREO_ELECTRONICO,ULTIMA_COMPRA) values (19,'Diego ramirez','cliente@ejemplo.com',to_date('23/08/23','DD/MM/RR'));
Insert into G9_USUARIO.V_CLIENTES_CON_COMPRAS_RECIENTES (ID_CLIENTE,NOMBRE,CORREO_ELECTRONICO,ULTIMA_COMPRA) values (21,'jose','efafea@gmail.com',null);
Insert into G9_USUARIO.V_CLIENTES_CON_COMPRAS_RECIENTES (ID_CLIENTE,NOMBRE,CORREO_ELECTRONICO,ULTIMA_COMPRA) values (18,'Diego','cliente@ejemplo.com',to_date('24/08/23','DD/MM/RR'));
Insert into G9_USUARIO.V_CLIENTES_CON_COMPRAS_RECIENTES (ID_CLIENTE,NOMBRE,CORREO_ELECTRONICO,ULTIMA_COMPRA) values (1,'Ariel Guido Martinez','arielguido545@gmail.com',to_date('24/08/23','DD/MM/RR'));
REM INSERTING into G9_USUARIO.VISTA_CLIENTES_ACTIVOS
SET DEFINE OFF;
Insert into G9_USUARIO.VISTA_CLIENTES_ACTIVOS (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (18,'Diego','123 Calle Principal','8364723','cliente@ejemplo.com','ACTIVO');
Insert into G9_USUARIO.VISTA_CLIENTES_ACTIVOS (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (21,'jose','san jose','636323222','efafea@gmail.com','ACTIVO');
REM INSERTING into G9_USUARIO.VISTA_CLIENTES_INACTIVOS
SET DEFINE OFF;
Insert into G9_USUARIO.VISTA_CLIENTES_INACTIVOS (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (19,'Diego ramirez','123 Calle Principal','836472345','cliente@ejemplo.com','INACTIVO');
Insert into G9_USUARIO.VISTA_CLIENTES_INACTIVOS (ID_CLIENTE,NOMBRE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ESTADO_CLIENTE) values (1,'Ariel Guido Martinez','El centr贸 de gu谩cimo','64035862','arielguido545@gmail.com','INACTIVO');
REM INSERTING into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS
SET DEFINE OFF;
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (35,'Destornillador','Destornillador plano','DEST002','Unidad',5,19);
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (39,'Taladro','Taladro electrico','TALD004','Unidad',70,90);
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (40,'Cinta Metrica','Cinta metrica de acero','CINT005','Unidad',8,16);
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (41,'Llave Inglesa','Llave ajustable','LLAV006','Unidad',12,18);
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (45,'Gafas de Proteccion','Gafas de seguridad con proteccion UV','GAPR012','Unidad',8,15);
Insert into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS (ID_PRODUCTO,NOMBRE_PRODUCTO,DESCRIPCION,CODIGO,UNIDAD_MEDIDA,PRECIO_COMPRA,PRECIO_VENTA) values (81,'Llave Ajustable','Llave ajustable de 8 pulgadas','LLAJ010','Unidad',10,15);
REM INSERTING into G9_USUARIO.VISTA_PRODUCTOS_PRECIOS_BAJOS
SET DEFINE OFF;
REM INSERTING into G9_USUARIO.VISTA_VENTAS_CLIENTES
SET DEFINE OFF;
Insert into G9_USUARIO.VISTA_VENTAS_CLIENTES (ID_CLIENTE,NOMBRE_CLIENTE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ID_VENTA,CANTIDAD,NOMBRE_PRODUCTO) values (1,'Ariel Guido Martinez','El centr贸 de gu谩cimo','64035862','arielguido545@gmail.com',1,3,'Taladro');
Insert into G9_USUARIO.VISTA_VENTAS_CLIENTES (ID_CLIENTE,NOMBRE_CLIENTE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ID_VENTA,CANTIDAD,NOMBRE_PRODUCTO) values (19,'Diego ramirez','123 Calle Principal','836472345','cliente@ejemplo.com',2,3,'Taladro');
Insert into G9_USUARIO.VISTA_VENTAS_CLIENTES (ID_CLIENTE,NOMBRE_CLIENTE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ID_VENTA,CANTIDAD,NOMBRE_PRODUCTO) values (18,'Diego','123 Calle Principal','8364723','cliente@ejemplo.com',6,3,'Cinta Metrica');
Insert into G9_USUARIO.VISTA_VENTAS_CLIENTES (ID_CLIENTE,NOMBRE_CLIENTE,DIRECCION,TELEFONO,CORREO_ELECTRONICO,ID_VENTA,CANTIDAD,NOMBRE_PRODUCTO) values (1,'Ariel Guido Martinez','El centr贸 de gu谩cimo','64035862','arielguido545@gmail.com',21,3,'Cinta Metrica');
REM INSERTING into G9_USUARIO.V_PRODUCTOS_MARGEN_BAJO
SET DEFINE OFF;
Insert into G9_USUARIO.V_PRODUCTOS_MARGEN_BAJO (ID_PRODUCTO,NOMBRE,PRECIO_VENTA,PRECIO_COMPRA,MARGEN_BENEFICIO) values (39,'Taladro',90,70,2.85714285714285714285714285714285714286);
Insert into G9_USUARIO.V_PRODUCTOS_MARGEN_BAJO (ID_PRODUCTO,NOMBRE,PRECIO_VENTA,PRECIO_COMPRA,MARGEN_BENEFICIO) values (39,'Taladro',90,70,2.85714285714285714285714285714285714286);
Insert into G9_USUARIO.V_PRODUCTOS_MARGEN_BAJO (ID_PRODUCTO,NOMBRE,PRECIO_VENTA,PRECIO_COMPRA,MARGEN_BENEFICIO) values (40,'Cinta Metrica',16,8,10);
Insert into G9_USUARIO.V_PRODUCTOS_MARGEN_BAJO (ID_PRODUCTO,NOMBRE,PRECIO_VENTA,PRECIO_COMPRA,MARGEN_BENEFICIO) values (40,'Cinta Metrica',16,8,10);
REM INSERTING into G9_USUARIO.V_PRODUCTOS_MENOS_INVENTARIO
SET DEFINE OFF;
Insert into G9_USUARIO.V_PRODUCTOS_MENOS_INVENTARIO (ID_PRODUCTO,NOMBRE,CANTIDAD_ACTUAL) values (39,'Taladro',22);
REM INSERTING into G9_USUARIO.V_VENTAS_POR_MES
SET DEFINE OFF;
Insert into G9_USUARIO.V_VENTAS_POR_MES (MES,TOTAL_VENTAS) values ('2023-08',12);
REM INSERTING into G9_USUARIO.V_VENTAS_TOTALES_POR_PRODUCTO
SET DEFINE OFF;
Insert into G9_USUARIO.V_VENTAS_TOTALES_POR_PRODUCTO (ID_PRODUCTO,NOMBRE,TOTAL_VENDIDO) values (39,'Taladro',6);
Insert into G9_USUARIO.V_VENTAS_TOTALES_POR_PRODUCTO (ID_PRODUCTO,NOMBRE,TOTAL_VENDIDO) values (40,'Cinta Metrica',6);
--------------------------------------------------------
--  DDL for Index SYS_C007730
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007730" ON "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007731
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007731" ON "G9_USUARIO"."INVENTARIO" ("ID_INVENTARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007733
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007733" ON "G9_USUARIO"."PRECIOS" ("ID_PRECIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007735
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007735" ON "G9_USUARIO"."MOVIMIENTOS" ("ID_MOVIMIENTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007737
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007737" ON "G9_USUARIO"."CLIENTES" ("ID_CLIENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007738
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007738" ON "G9_USUARIO"."AUDITORIAS" ("ID_AUDITORIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007746
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007746" ON "G9_USUARIO"."AUDITORIA_CLIENTES" ("ID_AUDITORIA_CLIENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007748
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007748" ON "G9_USUARIO"."AUDITORIA_PRODUCTOS" ("ID_AUDITORIA_PRODUCTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007759
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007759" ON "G9_USUARIO"."VENTAS" ("ID_VENTA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007762
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007762" ON "G9_USUARIO"."AUDITORIA_PRECIOS" ("ID_AUDITORIA_PRECIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007767
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007767" ON "G9_USUARIO"."AUDITORIA_VENTAS" ("ID_Auditoria_Venta") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007746
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007746" ON "G9_USUARIO"."AUDITORIA_CLIENTES" ("ID_AUDITORIA_CLIENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007762
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007762" ON "G9_USUARIO"."AUDITORIA_PRECIOS" ("ID_AUDITORIA_PRECIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007748
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007748" ON "G9_USUARIO"."AUDITORIA_PRODUCTOS" ("ID_AUDITORIA_PRODUCTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007738
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007738" ON "G9_USUARIO"."AUDITORIAS" ("ID_AUDITORIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007767
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007767" ON "G9_USUARIO"."AUDITORIA_VENTAS" ("ID_Auditoria_Venta") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007737
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007737" ON "G9_USUARIO"."CLIENTES" ("ID_CLIENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007731
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007731" ON "G9_USUARIO"."INVENTARIO" ("ID_INVENTARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007735
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007735" ON "G9_USUARIO"."MOVIMIENTOS" ("ID_MOVIMIENTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007733
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007733" ON "G9_USUARIO"."PRECIOS" ("ID_PRECIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007730
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007730" ON "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Index SYS_C007759
--------------------------------------------------------

  CREATE UNIQUE INDEX "G9_USUARIO"."SYS_C007759" ON "G9_USUARIO"."VENTAS" ("ID_VENTA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9" ;
--------------------------------------------------------
--  DDL for Trigger TR_AUDITORIA_PRECIOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_AUDITORIA_PRECIOS" 
AFTER UPDATE ON PRECIOS
FOR EACH ROW
BEGIN

    IF UPDATING('PRECIO_VENTA') THEN
        INSERT INTO AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO, ID_PRECIO, FECHA, ACCION, PRECIO_ANTERIOR, PRECIO_ACTUALIZADO)
        VALUES (SEQ_ID_AUDITORIA_PRECIO.NEXTVAL, :OLD.ID_PRECIO, SYSDATE, 'UPDATE PRECIO_VENTA', :OLD.PRECIO_VENTA, :NEW.PRECIO_VENTA);
    END IF;
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_AUDITORIA_PRECIOS" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_AUDITORIA_VENTAS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_AUDITORIA_VENTAS" 
AFTER INSERT ON Ventas
FOR EACH ROW
BEGIN
    INSERT INTO "G9_USUARIO"."AUDITORIA_VENTAS" (
        "ID_Auditoria_Venta", "ID_VENTA", "CANTIDAD", "ID_PRODUCTO", "ID_CLIENTE",
        "FECHA_VENTA", "Accion", "Fecha_Accion"
    )
    VALUES (
        SEQ_ID_AUDITORIA_VENTA.NEXTVAL, :NEW.ID_VENTA, :NEW.CANTIDAD,
        :NEW.ID_PRODUCTO, :NEW.ID_CLIENTE, :NEW.FECHA_VENTA,
        'Venta realizada', SYSDATE
    );
END;
/
ALTER TRIGGER "G9_USUARIO"."TR_AUDITORIA_VENTAS" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_CLIENTE_ESTADO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_CLIENTE_ESTADO" 
AFTER UPDATE OF ESTADO_CLIENTE ON CLIENTES
FOR EACH ROW
BEGIN
    IF :NEW.ESTADO_CLIENTE != :OLD.ESTADO_CLIENTE THEN
        INSERT INTO AUDITORIA_CLIENTES (ID_CLIENTE, FECHA, ACCION)
        VALUES (:NEW.ID_CLIENTE, SYSDATE,
            CASE
                WHEN :NEW.ESTADO_CLIENTE = 'ACTIVO' THEN 'Activado'
                WHEN :NEW.ESTADO_CLIENTE = 'INACTIVO' THEN 'Desactivado'
            END);
    END IF;
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_CLIENTE_ESTADO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_CLIENTE_INSERT
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_CLIENTE_INSERT" 
AFTER INSERT ON CLIENTES
FOR EACH ROW
BEGIN
  INSERT INTO AUDITORIA_CLIENTES (ID_CLIENTE, FECHA, ACCION)
  VALUES (:NEW.ID_CLIENTE, SYSDATE, 'INSERT');
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_CLIENTE_INSERT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_PRODUCTO_INSERT
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_PRODUCTO_INSERT" 
AFTER INSERT ON PRODUCTOS
FOR EACH ROW
BEGIN
  INSERT INTO AUDITORIA_PRODUCTOS (ID_PRODUCTO, FECHA, ACCION)
  VALUES (:NEW.ID_PRODUCTO, SYSDATE, 'INSERT');
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_PRODUCTO_INSERT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_CLIENTE_INSERT
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_CLIENTE_INSERT" 
AFTER INSERT ON CLIENTES
FOR EACH ROW
BEGIN
  INSERT INTO AUDITORIA_CLIENTES (ID_CLIENTE, FECHA, ACCION)
  VALUES (:NEW.ID_CLIENTE, SYSDATE, 'INSERT');
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_CLIENTE_INSERT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_CLIENTE_ESTADO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_CLIENTE_ESTADO" 
AFTER UPDATE OF ESTADO_CLIENTE ON CLIENTES
FOR EACH ROW
BEGIN
    IF :NEW.ESTADO_CLIENTE != :OLD.ESTADO_CLIENTE THEN
        INSERT INTO AUDITORIA_CLIENTES (ID_CLIENTE, FECHA, ACCION)
        VALUES (:NEW.ID_CLIENTE, SYSDATE,
            CASE
                WHEN :NEW.ESTADO_CLIENTE = 'ACTIVO' THEN 'Activado'
                WHEN :NEW.ESTADO_CLIENTE = 'INACTIVO' THEN 'Desactivado'
            END);
    END IF;
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_CLIENTE_ESTADO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_AUDITORIA_PRECIOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_AUDITORIA_PRECIOS" 
AFTER UPDATE ON PRECIOS
FOR EACH ROW
BEGIN

    IF UPDATING('PRECIO_VENTA') THEN
        INSERT INTO AUDITORIA_PRECIOS (ID_AUDITORIA_PRECIO, ID_PRECIO, FECHA, ACCION, PRECIO_ANTERIOR, PRECIO_ACTUALIZADO)
        VALUES (SEQ_ID_AUDITORIA_PRECIO.NEXTVAL, :OLD.ID_PRECIO, SYSDATE, 'UPDATE PRECIO_VENTA', :OLD.PRECIO_VENTA, :NEW.PRECIO_VENTA);
    END IF;
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_AUDITORIA_PRECIOS" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_PRODUCTO_INSERT
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_PRODUCTO_INSERT" 
AFTER INSERT ON PRODUCTOS
FOR EACH ROW
BEGIN
  INSERT INTO AUDITORIA_PRODUCTOS (ID_PRODUCTO, FECHA, ACCION)
  VALUES (:NEW.ID_PRODUCTO, SYSDATE, 'INSERT');
END;

/
ALTER TRIGGER "G9_USUARIO"."TR_PRODUCTO_INSERT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TR_AUDITORIA_VENTAS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "G9_USUARIO"."TR_AUDITORIA_VENTAS" 
AFTER INSERT ON Ventas
FOR EACH ROW
BEGIN
    INSERT INTO "G9_USUARIO"."AUDITORIA_VENTAS" (
        "ID_Auditoria_Venta", "ID_VENTA", "CANTIDAD", "ID_PRODUCTO", "ID_CLIENTE",
        "FECHA_VENTA", "Accion", "Fecha_Accion"
    )
    VALUES (
        SEQ_ID_AUDITORIA_VENTA.NEXTVAL, :NEW.ID_VENTA, :NEW.CANTIDAD,
        :NEW.ID_PRODUCTO, :NEW.ID_CLIENTE, :NEW.FECHA_VENTA,
        'Venta realizada', SYSDATE
    );
END;
/
ALTER TRIGGER "G9_USUARIO"."TR_AUDITORIA_VENTAS" ENABLE;
--------------------------------------------------------
--  DDL for Procedure ACTIVAR_INACTIVAR_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTIVAR_INACTIVAR_CLIENTE" (
    p_id_cliente NUMBER,
    p_estado VARCHAR2
)
AS
BEGIN
    IF p_estado = 'ACTIVO' THEN
        UPDATE Clientes
        SET Estado_cliente = 'ACTIVO'
        WHERE ID_cliente = p_id_cliente;
    ELSIF p_estado = 'INACTIVO' THEN
        UPDATE Clientes
        SET Estado_cliente = 'INACTIVO'
        WHERE ID_cliente = p_id_cliente;
    ELSE
        -- Manejar una opcin invlida, si lo deseas
        RAISE_APPLICATION_ERROR(-20001, 'Estado invlido. Utilizar "ACTIVO" o "INACTIVO".');
    END IF;

    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_AUDITORIA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_AUDITORIA" (
    p_id_auditoria NUMBER,
    p_id_movimiento NUMBER,
    p_fecha DATE,
    p_resultado VARCHAR2
)
AS
BEGIN
    UPDATE Auditorias
    SET ID_movimiento = p_id_movimiento,
        Fecha = p_fecha,
        Resultado = p_resultado
    WHERE ID_auditoria = p_id_auditoria;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_CLIENTE" (
    p_id_cliente NUMBER,
    p_nombre VARCHAR2,
    p_direccion VARCHAR2,
    p_telefono VARCHAR2,
    p_correo_electronico VARCHAR2
)
AS
BEGIN
    UPDATE Clientes
    SET Nombre = p_nombre,
        Direccion = p_direccion,
        Telefono = p_telefono,
        Correo_electronico = p_correo_electronico
    WHERE ID_cliente = p_id_cliente;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_INVENTARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_INVENTARIO" (
    p_id_inventario NUMBER,
    p_id_producto NUMBER,
    p_cantidad_actual NUMBER
)
AS
BEGIN
    UPDATE Inventario
    SET ID_producto = p_id_producto,
        Cantidad_actual = p_cantidad_actual
    WHERE ID_inventario = p_id_inventario;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_MOVIMIENTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_MOVIMIENTO" (
    p_id_movimiento NUMBER,
    p_id_producto NUMBER,
    p_tipo_movimiento VARCHAR2,
    p_cantidad NUMBER,
    p_fecha DATE
)
AS
BEGIN
    UPDATE Movimientos
    SET ID_producto = p_id_producto,
        Tipo_movimiento = p_tipo_movimiento,
        Cantidad = p_cantidad,
        Fecha = p_fecha
    WHERE ID_movimiento = p_id_movimiento;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_PRECIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_PRECIO" (
    p_id_precio NUMBER,
    p_id_producto NUMBER,
    p_precio_compra NUMBER,
    p_precio_venta NUMBER
)
AS
BEGIN
    UPDATE Precios
    SET ID_producto = p_id_producto,
        Precio_compra = p_precio_compra,
        Precio_venta = p_precio_venta
    WHERE ID_precio = p_id_precio;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_PRODUCTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_PRODUCTO" (
    p_id_producto NUMBER,
    p_nombre VARCHAR2,
    p_descripcion VARCHAR2,
    p_codigo VARCHAR2,
    p_unidad_medida VARCHAR2
)
AS
BEGIN
    UPDATE Productos
    SET Nombre = p_nombre,
        Descripcion = p_descripcion,
        Codigo = p_codigo,
        Unidad_medida = p_unidad_medida
    WHERE ID_producto = p_id_producto;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ACTUALIZAR_VENTA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ACTUALIZAR_VENTA" (
    p_id_venta IN NUMBER,
    p_cantidad IN NUMBER,
    p_id_producto IN NUMBER,
    p_id_cliente IN NUMBER,
    p_fecha_venta IN DATE
) AS
BEGIN
    UPDATE VENTAS
    SET CANTIDAD = p_cantidad,
        ID_PRODUCTO = p_id_producto,
        ID_CLIENTE = p_id_cliente,
        FECHA_VENTA = p_fecha_venta
    WHERE ID_VENTA = p_id_venta;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_AUDITORIA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_AUDITORIA" (
    p_id_auditoria NUMBER
)
AS
BEGIN
    DELETE FROM Auditorias
    WHERE ID_auditoria = p_id_auditoria;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_CLIENTE" (p_id_cliente NUMBER) IS
BEGIN
    -- Eliminar registros relacionados en otras tablas (si es necesario)
    DELETE FROM Ventas WHERE ID_cliente = p_id_cliente; -- Por ejemplo, si tienes una tabla de Ventas relacionada con Clientes
    DELETE FROM Clientes WHERE ID_cliente = p_id_cliente;
    COMMIT;
    DBMS_OUTPUT.PUT_LINE('Cliente eliminado con xito.');
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Cliente no encontrado.');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_INVENTARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_INVENTARIO" (
    p_id_inventario NUMBER
)
AS
BEGIN
    DELETE FROM Inventario
    WHERE ID_inventario = p_id_inventario;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_MOVIMIENTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_MOVIMIENTO" (
    p_id_movimiento NUMBER
)
AS
BEGIN
    DELETE FROM Movimientos
    WHERE ID_movimiento = p_id_movimiento;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_PRECIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_PRECIO" (
    p_id_precio NUMBER
)
AS
BEGIN
    DELETE FROM Precios
    WHERE ID_precio = p_id_precio;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_PRODUCTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_PRODUCTO" (
    p_id_producto NUMBER
)
AS
BEGIN
    DELETE FROM Productos
    WHERE ID_producto = p_id_producto;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure ELIMINAR_VENTA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."ELIMINAR_VENTA" (
    p_id_venta IN NUMBER
) AS
BEGIN
    DELETE FROM VENTAS
    WHERE ID_VENTA = p_id_venta;
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_AUDITORIA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_AUDITORIA" (
    p_id_auditoria NUMBER,
    p_id_movimiento NUMBER,
    p_fecha DATE,
    p_resultado VARCHAR2
)
AS
BEGIN
    INSERT INTO Auditorias (ID_auditoria, ID_movimiento, Fecha, Resultado)
    VALUES (p_id_auditoria, p_id_movimiento, p_fecha, p_resultado);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_CLIENTE" (
    p_id_cliente NUMBER,
    p_nombre VARCHAR2,
    p_direccion VARCHAR2,
    p_telefono VARCHAR2,
    p_correo_electronico VARCHAR2
)
AS
BEGIN
    INSERT INTO Clientes (ID_cliente, Nombre, Direccion, Telefono, Correo_electronico)
    VALUES (p_id_cliente, p_nombre, p_direccion, p_telefono, p_correo_electronico);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_INVENTARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_INVENTARIO" (
    p_id_inventario NUMBER,
    p_id_producto NUMBER,
    p_cantidad_actual NUMBER
)
AS
BEGIN
    INSERT INTO Inventario (ID_inventario, ID_producto, Cantidad_actual)
    VALUES (p_id_inventario, p_id_producto, p_cantidad_actual);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_MOVIMIENTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_MOVIMIENTO" (
    p_id_movimiento NUMBER,
    p_id_producto NUMBER,
    p_tipo_movimiento VARCHAR2,
    p_cantidad NUMBER,
    p_fecha DATE
)
AS
BEGIN
    INSERT INTO Movimientos (ID_movimiento, ID_producto, Tipo_movimiento, Cantidad, Fecha)
    VALUES (p_id_movimiento, p_id_producto, p_tipo_movimiento, p_cantidad, p_fecha);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_PRECIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_PRECIO" (
    p_id_precio NUMBER,
    p_id_producto NUMBER,
    p_precio_compra NUMBER,
    p_precio_venta NUMBER
)
AS
BEGIN
    INSERT INTO Precios (ID_precio, ID_producto, Precio_compra, Precio_venta)
    VALUES (p_id_precio, p_id_producto, p_precio_compra, p_precio_venta);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_PRODUCTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_PRODUCTO" (
    p_id_producto NUMBER,
    p_nombre VARCHAR2,
    p_descripcion VARCHAR2,
    p_codigo VARCHAR2,
    p_unidad_medida VARCHAR2
)
AS
BEGIN
    INSERT INTO Productos (ID_producto, Nombre, Descripcion, Codigo, Unidad_medida)
    VALUES (p_id_producto, p_nombre, p_descripcion, p_codigo, p_unidad_medida);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure INSERTAR_VENTA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."INSERTAR_VENTA" (
    p_cantidad IN NUMBER,
    p_id_producto IN NUMBER,
    p_id_cliente IN NUMBER,
    p_fecha_venta IN DATE
) AS
BEGIN
    INSERT INTO VENTAS (ID_VENTA, CANTIDAD, ID_PRODUCTO, ID_CLIENTE, FECHA_VENTA)
    VALUES (SEQ_VENTAS.NEXTVAL, p_cantidad, p_id_producto, p_id_cliente, p_fecha_venta);
    COMMIT;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_AUDITORIA
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_AUDITORIA" (
    p_id_auditoria NUMBER,
    p_id_movimiento OUT NUMBER,
    p_fecha OUT DATE,
    p_resultado OUT VARCHAR2
)
AS
BEGIN
    SELECT ID_movimiento, Fecha, Resultado
    INTO p_id_movimiento, p_fecha, p_resultado
    FROM Auditorias
    WHERE ID_auditoria = p_id_auditoria;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_CLIENTE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_CLIENTE" (
    p_id_cliente NUMBER,
    p_nombre OUT VARCHAR2,
    p_direccion OUT VARCHAR2,
    p_telefono OUT VARCHAR2,
    p_correo_electronico OUT VARCHAR2
)
AS
BEGIN
    SELECT Nombre, Direccion, Telefono, Correo_electronico
    INTO p_nombre, p_direccion, p_telefono, p_correo_electronico
    FROM Clientes
    WHERE ID_cliente = p_id_cliente;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_INVENTARIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_INVENTARIO" (
    p_id_inventario NUMBER,
    p_id_producto OUT NUMBER,
    p_cantidad_actual OUT NUMBER
)
AS
BEGIN
    SELECT ID_producto, Cantidad_actual
    INTO p_id_producto, p_cantidad_actual
    FROM Inventario
    WHERE ID_inventario = p_id_inventario;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_MOVIMIENTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_MOVIMIENTO" (
    p_id_movimiento NUMBER,
    p_id_producto OUT NUMBER,
    p_tipo_movimiento OUT VARCHAR2,
    p_cantidad OUT NUMBER,
    p_fecha OUT DATE
)
AS
BEGIN
    SELECT ID_producto, Tipo_movimiento, Cantidad, Fecha
    INTO p_id_producto, p_tipo_movimiento, p_cantidad, p_fecha
    FROM Movimientos
    WHERE ID_movimiento = p_id_movimiento;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_PRECIO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_PRECIO" (
    p_id_precio NUMBER,
    p_id_producto OUT NUMBER,
    p_precio_compra OUT NUMBER,
    p_precio_venta OUT NUMBER
)
AS
BEGIN
    SELECT ID_producto, Precio_compra, Precio_venta
    INTO p_id_producto, p_precio_compra, p_precio_venta
    FROM Precios
    WHERE ID_precio = p_id_precio;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_PRODUCTO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_PRODUCTO" (
    p_id_producto NUMBER,
    p_nombre OUT VARCHAR2,
    p_descripcion OUT VARCHAR2,
    p_codigo OUT VARCHAR2,
    p_unidad_medida OUT VARCHAR2
)
AS
BEGIN
    SELECT Nombre, Descripcion, Codigo, Unidad_medida
    INTO p_nombre, p_descripcion, p_codigo, p_unidad_medida
    FROM Productos
    WHERE ID_producto = p_id_producto;
END;

/
--------------------------------------------------------
--  DDL for Procedure OBTENER_VENTA_POR_ID
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "G9_USUARIO"."OBTENER_VENTA_POR_ID" (
    p_id_venta IN NUMBER,
    p_cantidad OUT NUMBER,
    p_id_producto OUT NUMBER,
    p_id_cliente OUT NUMBER,
    p_fecha_venta OUT DATE
) AS
BEGIN
    SELECT CANTIDAD, ID_PRODUCTO, ID_CLIENTE, FECHA_VENTA
    INTO p_cantidad, p_id_producto, p_id_cliente, p_fecha_venta
    FROM VENTAS
    WHERE ID_VENTA = p_id_venta;
END;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_ACTUALIZACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_ACTUALIZACION" AS
    PROCEDURE actualizar_inventario(
        p_id_inventario NUMBER,
        p_id_producto NUMBER,
        p_cantidad_actual NUMBER
    );

    PROCEDURE actualizar_precio(
        p_id_precio NUMBER,
        p_id_producto NUMBER,
        p_precio_compra NUMBER,
        p_precio_venta NUMBER
    );
END PAQUETE_ACTUALIZACION;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_AUDITORIA
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_AUDITORIA" AS
    FUNCTION OBTENER_AUDITORIAS_POR_TABLA(p_Tabla VARCHAR2) RETURN SYS_REFCURSOR;
    -- Otras funciones relacionadas con auditora
END PAQUETE_AUDITORIA;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_CALCULOPRODUCTOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_CALCULOPRODUCTOS" AS
    FUNCTION CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO(p_ID_Producto NUMBER) RETURN NUMBER;
    FUNCTION OBTENER_INFORMACION_PRODUCTO(p_ID_Producto NUMBER) RETURN SYS_REFCURSOR;
    FUNCTION OBTENER_PRODUCTOS_MARGEN_BAJO(p_Porcentaje NUMBER) RETURN SYS_REFCURSOR;
    FUNCTION OBTENER_PRODUCTOS_SIN_VENTAS(p_Dias NUMBER) RETURN SYS_REFCURSOR;
    FUNCTION OBTENER_PROMEDIO_PRECIOS RETURN NUMBER;
    -- Otras funciones relacionadas con productos
END PAQUETE_calculoPRODUCTOS;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_ELIMINACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_ELIMINACION" AS
    PROCEDURE eliminar_inventario(
        p_id_inventario NUMBER
    );

    PROCEDURE eliminar_precio(
        p_id_precio NUMBER
    );

    PROCEDURE eliminar_producto(
        p_id_producto NUMBER
    );
END PAQUETE_ELIMINACION;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_MODIFICACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_MODIFICACION" AS
    PROCEDURE activar_inactivar_cliente(
        p_id_cliente NUMBER,
        p_estado VARCHAR2
    );

    PROCEDURE ELIMINAR_VENTA(
        p_id_venta IN NUMBER
    );
END PAQUETE_MODIFICACION;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_OBTENCION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_OBTENCION" AS
    PROCEDURE obtener_inventario(
        p_id_inventario NUMBER,
        p_id_producto OUT NUMBER,
        p_cantidad_actual OUT NUMBER
    );

    PROCEDURE obtener_precio(
        p_id_precio NUMBER,
        p_id_producto OUT NUMBER,
        p_precio_compra OUT NUMBER,
        p_precio_venta OUT NUMBER
    );

    PROCEDURE obtener_producto(
        p_id_producto NUMBER,
        p_nombre OUT VARCHAR2,
        p_descripcion OUT VARCHAR2,
        p_codigo OUT VARCHAR2,
        p_unidad_medida OUT VARCHAR2
    );
END PAQUETE_OBTENCION;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_OTRAS_FUNCIONES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_OTRAS_FUNCIONES" AS
    FUNCTION FUNCION_1 RETURN VARCHAR2;
    FUNCTION FUNCION_2(p_Parametro NUMBER) RETURN NUMBER;
    -- Otras funciones personalizadas
END PAQUETE_OTRAS_FUNCIONES;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_PROCESOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_PROCESOS" AS
    PROCEDURE insertar_inventario(
        p_id_inventario NUMBER,
        p_id_producto NUMBER,
        p_cantidad_actual NUMBER
    );

    PROCEDURE insertar_precio(
        p_id_precio NUMBER,
        p_id_producto NUMBER,
        p_precio_compra NUMBER,
        p_precio_venta NUMBER
    );

    PROCEDURE insertar_producto(
        p_id_producto NUMBER,
        p_nombre VARCHAR2,
        p_descripcion VARCHAR2,
        p_codigo VARCHAR2,
        p_unidad_medida VARCHAR2
    );
END PAQUETE_PROCESOS;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_PRODUCTOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_PRODUCTOS" AS
    FUNCTION CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO(p_ID_Producto NUMBER) RETURN NUMBER;
    FUNCTION OBTENER_INFORMACION_PRODUCTO(p_ID_Producto NUMBER) RETURN SYS_REFCURSOR;
    FUNCTION OBTENER_PRODUCTOS_MARGEN_BAJO(p_Porcentaje NUMBER) RETURN SYS_REFCURSOR;
    -- Otras funciones relacionadas con productos
END PAQUETE_PRODUCTOS;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_UTILIDADES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_UTILIDADES" AS
    FUNCTION OBTENER_FECHA_ACTUAL RETURN DATE;
    FUNCTION CALCULAR_EDAD(p_FechaNacimiento DATE) RETURN NUMBER;
    -- Otras funciones de utilidades
END PAQUETE_UTILIDADES;

/
--------------------------------------------------------
--  DDL for Package PAQUETE_VENTAS_CLIENTES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE "G9_USUARIO"."PAQUETE_VENTAS_CLIENTES" AS
    FUNCTION OBTENER_CLIENTES_FRECUENTES RETURN SYS_REFCURSOR;
    FUNCTION OBTENER_CLIENTES_INACTIVOS_CON_COMPRAS RETURN SYS_REFCURSOR;
    FUNCTION REALIZAR_COMPRA(p_ID_Producto NUMBER, p_Cantidad NUMBER) RETURN BOOLEAN;
    -- Otras funciones relacionadas con ventas y clientes
END PAQUETE_VENTAS_CLIENTES;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_ACTUALIZACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_ACTUALIZACION" AS
    PROCEDURE actualizar_inventario(
        p_id_inventario NUMBER,
        p_id_producto NUMBER,
        p_cantidad_actual NUMBER
    )
    AS
    BEGIN
        UPDATE Inventario
        SET ID_producto = p_id_producto,
            Cantidad_actual = p_cantidad_actual
        WHERE ID_inventario = p_id_inventario;
        COMMIT;
    END;

    PROCEDURE actualizar_precio(
        p_id_precio NUMBER,
        p_id_producto NUMBER,
        p_precio_compra NUMBER,
        p_precio_venta NUMBER
    )
    AS
    BEGIN
        UPDATE Precios
        SET ID_producto = p_id_producto,
            Precio_compra = p_precio_compra,
            Precio_venta = p_precio_venta
        WHERE ID_precio = p_id_precio;
        COMMIT;
    END;
END PAQUETE_ACTUALIZACION;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_AUDITORIA
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_AUDITORIA" AS
    FUNCTION OBTENER_AUDITORIAS_POR_TABLA(p_Tabla VARCHAR2) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM TU_TABLA_DE_AUDITORIA
            WHERE TABLA_AUDITADA = p_Tabla;
        RETURN c_result;
    END OBTENER_AUDITORIAS_POR_TABLA;

    -- Otras funciones relacionadas con auditora
END PAQUETE_AUDITORIA;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_CALCULOPRODUCTOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_CALCULOPRODUCTOS" AS
    FUNCTION CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO(p_ID_Producto NUMBER) RETURN NUMBER IS
        v_TotalInventario NUMBER;
    BEGIN
        SELECT CANTIDAD_ACTUAL
        INTO v_TotalInventario
        FROM INVENTARIO
        WHERE ID_PRODUCTO = p_ID_Producto;

        RETURN v_TotalInventario;
    END CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO;

    FUNCTION OBTENER_INFORMACION_PRODUCTO(p_ID_Producto NUMBER) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM PRODUCTOS
            WHERE ID_PRODUCTO = p_ID_Producto;
        RETURN c_result;
    END OBTENER_INFORMACION_PRODUCTO;

    FUNCTION OBTENER_PRODUCTOS_MARGEN_BAJO(p_Porcentaje NUMBER) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM PRODUCTOS
            WHERE (PRECIO_VENTA - PRECIO_COMPRA) / PRECIO_VENTA * 100 < p_Porcentaje;
        RETURN c_result;
    END OBTENER_PRODUCTOS_MARGEN_BAJO;

    FUNCTION OBTENER_PRODUCTOS_SIN_VENTAS(p_Dias NUMBER) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM PRODUCTOS p
            WHERE NOT EXISTS (
                SELECT 1
                FROM VENTAS v
                WHERE v.ID_PRODUCTO = p.ID_PRODUCTO
                AND v.FECHA_VENTA >= SYSDATE - p_Dias
            );
        RETURN c_result;
    END OBTENER_PRODUCTOS_SIN_VENTAS;

    FUNCTION OBTENER_PROMEDIO_PRECIOS RETURN NUMBER IS
        v_PromedioPrecios NUMBER;
    BEGIN
        SELECT AVG(PRECIO_VENTA)
        INTO v_PromedioPrecios
        FROM PRODUCTOS;
        RETURN v_PromedioPrecios;
    END OBTENER_PROMEDIO_PRECIOS;

    -- Otras funciones relacionadas con productos
END PAQUETE_calculoPRODUCTOS;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_ELIMINACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_ELIMINACION" AS
    PROCEDURE eliminar_inventario(
        p_id_inventario NUMBER
    )
    AS
    BEGIN
        DELETE FROM Inventario
        WHERE ID_inventario = p_id_inventario;
        COMMIT;
    END;

    PROCEDURE eliminar_precio(
        p_id_precio NUMBER
    )
    AS
    BEGIN
        DELETE FROM Precios
        WHERE ID_precio = p_id_precio;
        COMMIT;
    END;

    PROCEDURE eliminar_producto(
        p_id_producto NUMBER
    )
    AS
    BEGIN
        DELETE FROM Productos
        WHERE ID_producto = p_id_producto;
        COMMIT;
    END;
END PAQUETE_ELIMINACION;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_MODIFICACION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_MODIFICACION" AS
    PROCEDURE activar_inactivar_cliente(
        p_id_cliente NUMBER,
        p_estado VARCHAR2
    )
    AS
    BEGIN
        IF p_estado = 'ACTIVO' THEN
            UPDATE Clientes
            SET Estado_cliente = 'ACTIVO'
            WHERE ID_cliente = p_id_cliente;
        ELSIF p_estado = 'INACTIVO' THEN
            UPDATE Clientes
            SET Estado_cliente = 'INACTIVO'
            WHERE ID_cliente = p_id_cliente;
        ELSE
            -- Manejar una opcin invlida, si lo deseas
            RAISE_APPLICATION_ERROR(-20001, 'Estado invlido. Utilizar "ACTIVO" o "INACTIVO".');
        END IF;

        COMMIT;
    END;

    PROCEDURE ELIMINAR_VENTA(
        p_id_venta IN NUMBER
    )
    AS
    BEGIN
        DELETE FROM VENTAS
        WHERE ID_VENTA = p_id_venta;
        COMMIT;
    END;
END PAQUETE_MODIFICACION;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_OBTENCION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_OBTENCION" AS
    PROCEDURE obtener_inventario(
        p_id_inventario NUMBER,
        p_id_producto OUT NUMBER,
        p_cantidad_actual OUT NUMBER
    )
    AS
    BEGIN
        SELECT ID_producto, Cantidad_actual
        INTO p_id_producto, p_cantidad_actual
        FROM Inventario
        WHERE ID_inventario = p_id_inventario;
    END;

    PROCEDURE obtener_precio(
        p_id_precio NUMBER,
        p_id_producto OUT NUMBER,
        p_precio_compra OUT NUMBER,
        p_precio_venta OUT NUMBER
    )
    AS
    BEGIN
        SELECT ID_producto, Precio_compra, Precio_venta
        INTO p_id_producto, p_precio_compra, p_precio_venta
        FROM Precios
        WHERE ID_precio = p_id_precio;
    END;

    PROCEDURE obtener_producto(
        p_id_producto NUMBER,
        p_nombre OUT VARCHAR2,
        p_descripcion OUT VARCHAR2,
        p_codigo OUT VARCHAR2,
        p_unidad_medida OUT VARCHAR2
    )
    AS
    BEGIN
        SELECT Nombre, Descripcion, Codigo, Unidad_medida
        INTO p_nombre, p_descripcion, p_codigo, p_unidad_medida
        FROM Productos
        WHERE ID_producto = p_id_producto;
    END;
END PAQUETE_OBTENCION;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_OTRAS_FUNCIONES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_OTRAS_FUNCIONES" AS
    FUNCTION FUNCION_1 RETURN VARCHAR2 IS
    BEGIN
        RETURN 'Resultado de la Funcin 1';
    END FUNCION_1;

    FUNCTION FUNCION

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_PROCESOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_PROCESOS" AS
    PROCEDURE insertar_inventario(
        p_id_inventario NUMBER,
        p_id_producto NUMBER,
        p_cantidad_actual NUMBER
    )
    AS
    BEGIN
        INSERT INTO Inventario (ID_inventario, ID_producto, Cantidad_actual)
        VALUES (p_id_inventario, p_id_producto, p_cantidad_actual);
        COMMIT;
    END;

    PROCEDURE insertar_precio(
        p_id_precio NUMBER,
        p_id_producto NUMBER,
        p_precio_compra NUMBER,
        p_precio_venta NUMBER
    )
    AS
    BEGIN
        INSERT INTO Precios (ID_precio, ID_producto, Precio_compra, Precio_venta)
        VALUES (p_id_precio, p_id_producto, p_precio_compra, p_precio_venta);
        COMMIT;
    END;

    PROCEDURE insertar_producto(
        p_id_producto NUMBER,
        p_nombre VARCHAR2,
        p_descripcion VARCHAR2,
        p_codigo VARCHAR2,
        p_unidad_medida VARCHAR2
    )
    AS
    BEGIN
        INSERT INTO Productos (ID_producto, Nombre, Descripcion, Codigo, Unidad_medida)
        VALUES (p_id_producto, p_nombre, p_descripcion, p_codigo, p_unidad_medida);
        COMMIT;
    END;
END PAQUETE_PROCESOS;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_PRODUCTOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_PRODUCTOS" AS
    FUNCTION CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO(p_ID_Producto NUMBER) RETURN NUMBER IS
        v_TotalInventario NUMBER := 0;
    BEGIN
        SELECT CANTIDAD_ACTUAL
        INTO v_TotalInventario
        FROM INVENTARIO
        WHERE ID_PRODUCTO = p_ID_Producto;

        RETURN v_TotalInventario;
    END CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO;

    FUNCTION OBTENER_INFORMACION_PRODUCTO(p_ID_Producto NUMBER) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM PRODUCTOS
            WHERE ID_PRODUCTO = p_ID_Producto;
        RETURN c_result;
    END OBTENER_INFORMACION_PRODUCTO;

    FUNCTION OBTENER_PRODUCTOS_MARGEN_BAJO(p_Porcentaje NUMBER) RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM PRODUCTOS
            WHERE (PRECIO_VENTA - PRECIO_COMPRA) / PRECIO_VENTA * 100 < p_Porcentaje;
        RETURN c_result;
    END OBTENER_PRODUCTOS_MARGEN_BAJO;

    -- Otras funciones relacionadas con productos
END PAQUETE_PRODUCTOS;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_UTILIDADES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_UTILIDADES" AS
    FUNCTION OBTENER_FECHA_ACTUAL RETURN DATE IS
    BEGIN
        RETURN SYSDATE;
    END OBTENER_FECHA_ACTUAL;

    FUNCTION CALCULAR_EDAD(p_FechaNacimiento DATE) RETURN NUMBER IS
        v_Edad NUMBER;
    BEGIN
        SELECT TRUNC(MONTHS_BETWEEN(OBTENER_FECHA_ACTUAL, p_FechaNacimiento) / 12)
        INTO v_Edad
        FROM DUAL;
        RETURN v_Edad;
    END CALCULAR_EDAD;

    -- Otras funciones de utilidades
END PAQUETE_UTILIDADES;

/
--------------------------------------------------------
--  DDL for Package Body PAQUETE_VENTAS_CLIENTES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE PACKAGE BODY "G9_USUARIO"."PAQUETE_VENTAS_CLIENTES" AS
    FUNCTION OBTENER_CLIENTES_FRECUENTES RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM TU_TABLA_DE_CLIENTES
            WHERE -- Tu condicin para obtener clientes frecuentes
            ;
        RETURN c_result;
    END OBTENER_CLIENTES_FRECUENTES;

    FUNCTION OBTENER_CLIENTES_INACTIVOS_CON_COMPRAS RETURN SYS_REFCURSOR IS
        c_result SYS_REFCURSOR;
    BEGIN
        OPEN c_result FOR
            SELECT *
            FROM TU_TABLA_DE_CLIENTES c
            WHERE c.ESTADO_CLIENTE = 'Inactivo'
            AND EXISTS (
                SELECT 1
                FROM TU_TABLA_DE_VENTAS v
                WHERE v.ID_CLIENTE = c.ID_CLIENTE
            );
        RETURN c_result;
    END OBTENER_CLIENTES_INACTIVOS_CON_COMPRAS;

    FUNCTION REALIZAR_COMPRA(p_ID_Producto NUMBER, p_Cantidad NUMBER) RETURN BOOLEAN IS
        v_StockDisponible NUMBER;
    BEGIN
        SELECT CANTIDAD_ACTUAL
        INTO v_StockDisponible
        FROM TU_TABLA_DE_INVENTARIO
        WHERE ID_PRODUCTO = p_ID_Producto;

        IF v_StockDisponible >= p_Cantidad THEN
            -- Realizar la compra y actualizar inventario
            -- Devolver verdadero (true) si la compra se realiz correctamente
            RETURN TRUE;
        ELSE
            -- Devolver falso (false) si no hay suficiente stock
            RETURN FALSE;
        END IF;
    END REALIZAR_COMPRA;

    -- Otras funciones relacionadas con ventas y clientes
END PAQUETE_VENTAS_CLIENTES;

/
--------------------------------------------------------
--  DDL for Function BUSCAR_PRODUCTO_POR_ID
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."BUSCAR_PRODUCTO_POR_ID" (
    p_id_producto NUMBER
) RETURN VARCHAR2
AS
    v_existe VARCHAR2(100);
BEGIN
    SELECT CASE
        WHEN COUNT(*) > 0 THEN 'El producto existe'
        ELSE 'El producto no existe'
    END INTO v_existe
    FROM Productos
    WHERE ID_producto = p_id_producto;

    RETURN v_existe;
END;

/
--------------------------------------------------------
--  DDL for Function CALCULAR_MARGEN_BENEFICIO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."CALCULAR_MARGEN_BENEFICIO" (
    p_id_producto NUMBER
) RETURN NUMBER
AS
    v_margen NUMBER;
BEGIN
    SELECT (Precio_venta - Precio_compra) / Precio_compra * 100
    INTO v_margen
    FROM Precios
    WHERE ID_producto = p_id_producto;

    RETURN v_margen;
END;

/
--------------------------------------------------------
--  DDL for Function CALCULAR_MARGEN_BENEFICIO_TODOSP
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."CALCULAR_MARGEN_BENEFICIO_TODOSP" RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT ID_producto,
               (Precio_venta - Precio_compra) / Precio_compra * 100 AS Margen_beneficio
        FROM Precios;

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function CALCULAR_MARGEN_BENEFICIO_TOTAL
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."CALCULAR_MARGEN_BENEFICIO_TOTAL" RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT ID_producto,
               (Precio_venta - Precio_compra) / Precio_compra * 100 AS Margen_beneficio
        FROM Precios;

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."CALCULAR_TOTAL_INVENTARIO_DE_UN_PRODUCTO" (
    p_id_producto NUMBER
) RETURN NUMBER
AS
    v_total NUMBER;
BEGIN
    SELECT SUM(Cantidad_actual)
    INTO v_total
    FROM Inventario
    WHERE ID_producto = p_id_producto;

    RETURN v_total;
END;     


/
--------------------------------------------------------
--  DDL for Function CALCULAR_VALOR_TOTAL_INVENTARIO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."CALCULAR_VALOR_TOTAL_INVENTARIO" RETURN NUMBER
AS
    v_valor_total NUMBER := 0;
    v_precio_compra NUMBER;
    v_cantidad_actual NUMBER;
BEGIN
    FOR item IN (SELECT i.Cantidad_actual, p.Precio_compra
                 FROM Inventario i
                 JOIN Precios p ON i.ID_producto = p.ID_producto)
    LOOP
        v_cantidad_actual := item.Cantidad_actual;
        v_precio_compra := item.Precio_compra;
        v_valor_total := v_valor_total + (v_cantidad_actual * v_precio_compra);
    END LOOP;

    RETURN v_valor_total;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_CANTIDAD_TOTAL_CLIENTES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_CANTIDAD_TOTAL_CLIENTES" RETURN NUMBER
AS
    v_cantidad_total NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_cantidad_total FROM Clientes;
    RETURN v_cantidad_total;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_CANTIDAD_TOTAL_INVENTARIO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_CANTIDAD_TOTAL_INVENTARIO" RETURN NUMBER
AS
    v_cantidad_total NUMBER := 0;
BEGIN
    FOR item IN (SELECT Cantidad_actual FROM Inventario)
    LOOP
        v_cantidad_total := v_cantidad_total + item.Cantidad_actual;
    END LOOP;

    RETURN v_cantidad_total;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_CLIENTES_FRECUENTES
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_CLIENTES_FRECUENTES" (
    p_fecha_inicio DATE,
    p_fecha_fin DATE
) RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT c.*
        FROM Clientes c
        WHERE c.ID_cliente IN (
            SELECT ID_cliente
            FROM Movimientos
            WHERE Tipo_movimiento = 'Venta'
              AND Fecha BETWEEN p_fecha_inicio AND p_fecha_fin
            GROUP BY ID_cliente
            HAVING COUNT(*) > 1
        )
        ORDER BY c.ID_cliente;

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_CLIENTES_INACTIVOS_CON_COMPRAS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_CLIENTES_INACTIVOS_CON_COMPRAS" RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT c.ID_cliente, c.Nombre, c.Direccion, c.Telefono, c.Correo_electronico
        FROM Clientes c
        WHERE c.Estado_cliente = 'INACTIVO'
          AND EXISTS (
              SELECT 1
              FROM Ventas v
              WHERE v.ID_cliente = c.ID_cliente
          );

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_INFORMACION_PRODUCTO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_INFORMACION_PRODUCTO" (
    p_id_producto NUMBER
) RETURN Productos%ROWTYPE
AS
    v_producto Productos%ROWTYPE;
BEGIN
    SELECT *
    INTO v_producto
    FROM Productos
    WHERE ID_producto = p_id_producto;

    RETURN v_producto;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_PRODUCTOS_MARGEN_BAJO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_PRODUCTOS_MARGEN_BAJO" (
    p_margen_limite NUMBER
) RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT p.ID_producto, p.Nombre, p.Descripcion, p.Codigo,
               (pr.Precio_venta - pr.Precio_compra) / pr.Precio_compra * 100 AS Margen_beneficio
        FROM Productos p
        JOIN Precios pr ON p.ID_producto = pr.ID_producto
        WHERE (pr.Precio_venta - pr.Precio_compra) / pr.Precio_compra * 100 < p_margen_limite;

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_PRODUCTOS_SIN_VENTAS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_PRODUCTOS_SIN_VENTAS" RETURN SYS_REFCURSOR
AS
    v_resultados SYS_REFCURSOR;
BEGIN
    OPEN v_resultados FOR
        SELECT p.ID_producto, p.Nombre
        FROM Productos p
        WHERE NOT EXISTS (
            SELECT 1
            FROM Ventas v
            WHERE p.ID_producto = v.ID_producto
        );

    RETURN v_resultados;
END;

/
--------------------------------------------------------
--  DDL for Function OBTENER_PROMEDIO_PRECIOS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."OBTENER_PROMEDIO_PRECIOS" RETURN NUMBER
AS
    v_promedio NUMBER;
BEGIN
    SELECT AVG(Precio_venta)
    INTO v_promedio
    FROM Precios;

    RETURN v_promedio;
END;

/
--------------------------------------------------------
--  DDL for Function REALIZAR_COMPRA
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "G9_USUARIO"."REALIZAR_COMPRA" (
    p_id_cliente IN NUMBER,
    p_id_producto IN NUMBER,
    p_cantidad IN NUMBER
) RETURN VARCHAR2
IS
    v_stock_actual NUMBER;
BEGIN
    -- Verificar el stock del producto en el inventario
    SELECT CANTIDAD_ACTUAL INTO v_stock_actual
    FROM INVENTARIO
    WHERE ID_PRODUCTO = p_id_producto;

    IF v_stock_actual >= p_cantidad THEN
        -- Insertar el registro de venta
        INSERT INTO VENTAS (ID_VENTA, ID_CLIENTE, ID_PRODUCTO, CANTIDAD, FECHA_VENTA)
        VALUES (SEQ_ID_VENTA.NEXTVAL, p_id_cliente, p_id_producto, p_cantidad, SYSDATE);

        -- Actualizar el inventario
        UPDATE INVENTARIO
        SET CANTIDAD_ACTUAL = CANTIDAD_ACTUAL - p_cantidad
        WHERE ID_PRODUCTO = p_id_producto;

        COMMIT;
        RETURN 'Compra realizada con xito.';
    ELSE
        RETURN 'No hay suficiente stock disponible.';
    END IF;
EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RETURN 'Error al realizar la compra: ' || SQLERRM;
END;

/
--------------------------------------------------------
--  Constraints for Table AUDITORIA_CLIENTES
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_CLIENTES" ADD PRIMARY KEY ("ID_AUDITORIA_CLIENTE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table AUDITORIA_PRECIOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_PRECIOS" ADD PRIMARY KEY ("ID_AUDITORIA_PRECIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table AUDITORIA_PRODUCTOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_PRODUCTOS" ADD PRIMARY KEY ("ID_AUDITORIA_PRODUCTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table AUDITORIAS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIAS" ADD PRIMARY KEY ("ID_AUDITORIA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table AUDITORIA_VENTAS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_VENTAS" ADD PRIMARY KEY ("ID_Auditoria_Venta")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CLIENTES
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."CLIENTES" ADD PRIMARY KEY ("ID_CLIENTE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table INVENTARIO
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."INVENTARIO" ADD PRIMARY KEY ("ID_INVENTARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table MOVIMIENTOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."MOVIMIENTOS" ADD PRIMARY KEY ("ID_MOVIMIENTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRECIOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."PRECIOS" ADD PRIMARY KEY ("ID_PRECIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRODUCTOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."PRODUCTOS" ADD PRIMARY KEY ("ID_PRODUCTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Constraints for Table VENTAS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."VENTAS" MODIFY ("CANTIDAD" NOT NULL ENABLE);
  ALTER TABLE "G9_USUARIO"."VENTAS" MODIFY ("ID_PRODUCTO" NOT NULL ENABLE);
  ALTER TABLE "G9_USUARIO"."VENTAS" MODIFY ("ID_CLIENTE" NOT NULL ENABLE);
  ALTER TABLE "G9_USUARIO"."VENTAS" ADD PRIMARY KEY ("ID_VENTA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 1048576 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TBL_PROYECTO_G9"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table AUDITORIA_CLIENTES
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_CLIENTES" ADD FOREIGN KEY ("ID_CLIENTE")
	  REFERENCES "G9_USUARIO"."CLIENTES" ("ID_CLIENTE") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table AUDITORIA_PRODUCTOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIA_PRODUCTOS" ADD FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table AUDITORIAS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."AUDITORIAS" ADD FOREIGN KEY ("ID_MOVIMIENTO")
	  REFERENCES "G9_USUARIO"."MOVIMIENTOS" ("ID_MOVIMIENTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table INVENTARIO
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."INVENTARIO" ADD FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table MOVIMIENTOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."MOVIMIENTOS" ADD FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PRECIOS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."PRECIOS" ADD FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VENTAS
--------------------------------------------------------

  ALTER TABLE "G9_USUARIO"."VENTAS" ADD FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "G9_USUARIO"."PRODUCTOS" ("ID_PRODUCTO") ENABLE;
  ALTER TABLE "G9_USUARIO"."VENTAS" ADD FOREIGN KEY ("ID_CLIENTE")
	  REFERENCES "G9_USUARIO"."CLIENTES" ("ID_CLIENTE") ENABLE;
